<!-- 分享动态组件 -->
<!-- <view wx:for="{{postlist}}" wx:data-item="item" wx:key="unique">
  <in-userpush userimgsrc="{{item.avatarurl}}" username="{{item.nickname}}" pushtime="{{item.pushtime}}" pushtext="{{item.info}}" pushimgsrc="{{item.imgurl}}" postid="{{item._id}}" />
</view> -->

<view class="push" wx:for="{{postlist}}" wx:data-item="item" wx:key="key" touchmove="touchmove" style="filter: blur({{filter}})">
  <view class="user">
    <view>
      <image src="{{item.avatarurl}}" class="userinfoimg"></image>
    </view>
    <view class="userinfotext">
      <view class="nickname">{{item.nickname}}</view>
      <view class="userpushtime">{{item.pushtime}}</view>
    </view> 
  </view>
  <view class="userpush">
    <text class="userpushtext">{{item.info}}</text>
    <view class="userpushimg" wx:if="{{item.imgurl}}">
      <image class="itemimg" src="{{item.imgurl}}" data-id="{{item.imgurl}}" mode="aspectFill" bindtap="tapimg"></image>
    </view>
  </view>

  <view class="pushinfo" bindtap="inputcomment">

    <view wx:if="{{showlikelist[index] == false}}" data-id="{{item._id}}" data-openid="{{item._openid}}" data-like="{{item.likecount}}" bindtap="likeminuus">
      <image class="likeimg" src="/images/liked.png"></image>
      <text class="likes">{{item.likecount}}</text>
    </view>

    <view wx:else data-id="{{item._id}}" data-openid="{{item._openid}}" data-like="{{item.likecount}}" bindtap="likeadd">
      <image class="likeimg" src="/images/like.png"></image>
      <text class="likes">{{item.likecount}}</text>
    </view>

    <view class="commentimg">
      <image class="commentimg" src="/images/comment.png"></image>
    </view>
    <view class="pushinput">
      <input class="inputpost" adjust-position="true" placeholder="发表回复" bindinput="pushinput" value="{{inputclean}}"/>
    </view>
    <text class="postsend" data-id="{{item._id}}" type="default" size="mini" bindtap="uploadcomment">发表</text>
  </view>

  <view class="commentlist" wx:for="{{getcommentlist}}" wx:for-item="post" wx:key="unique">
    <text wx:if="{{post.postid == item._id}}">{{post.postuser}}:</text>
    <text class="commit" wx:if="{{post.postid == item._id}}">{{post.commit}}</text>
  </view>
  <view class="line"></view>
</view>

<!-- 上传信息页面 -->
<view class="input" style="display:{{showinputinfo}}">
  <view class="inputinfo">
    <!-- 输入框 -->
    <view class="section">
      <textarea bindinput="handleinfo" value="{{info}}" placeholder="说点什么....." auto-focus  />
      <!-- 添加图片 -->
      <view class='container'>
        <view wx:if='{{!Img}}' class='add' bindtap='chooseImage'>
          <image src='/images/add.png'></image>
        </view>
        <!-- 上传图片后显示图片 -->
        <block wx:if='{{Img}}'>
          <view class='image'>
            <image src='{{Img1}}' mode="aspectFill" bindtap='previewImage' bindlongpress='deleteImage'></image>
          </view>
        </block>
        <view class="imgtext">
          <text>添加一张图片\n</text>
          <text>(长按删除图片)</text>
        </view>
      </view>
    </view>
    <!-- 底部提交按钮 -->
    <view class='tips'>
      <text>发文请遵守国家法律法规\n</text>
      <text>一经发现立即封禁</text>
      <button type='primary' bindtap='upload' style='margin-top:8px;'>立即发布</button>
      <button type='warn' bindtap='close' style='margin-top:8px;'>取消</button>
    </view>
  </view>
</view>

<!-- 打开上传信息页面悬浮按钮 -->
<view style="display:{{showinputpage}}" bindtap="openinputpage">
  <view class="pushbutton">
    <image class="pushbuttonimg" src="/images/note.png"></image>
  </view>
</view>


