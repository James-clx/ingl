<!-- 标题和隐藏/显示周末按钮 -->
<in-bar title="课程表">
  <block wx:if="{{!ban_hide_weekeen}}">
    <view slot="left" class="bar-set" wx:if="{{hideweekend}}" bindtap="onHideWeekend">显示周末</view>
    <view slot="left" class="bar-set" wx:if="{{!hideweekend}}" bindtap="onHideWeekend">隐藏周末</view>
  </block>
  <block wx:if="{{ban_hide_weekeen}}">
    <view slot="left" class="bar-set">显示周末</view>
  </block>
</in-bar>

<view class="schedule">
  <!-- 周次选择器 -->
  <in-week_select weekarray="{{weekarray}}" selected_week="{{selected_week}}" today_week="{{today_week}}"
    bindpickerorbackweek="onPickerOrBackWeek" />

  <!-- 周1-7 -->
  <view style="display:{{hideweekend == true?'none':'block'}}">
    <view class="today"
      style="border-radius:{{point_day == 7?'0 15rpx 15rpx 0':'0'}};margin-left:{{point_day >= 4? point_day*89+(point_day+1):point_day*89+(point_day*point_day)-point_day*3}}rpx">
    </view>
    <view class="top">
      <view wx:for="{{['一','二','三','四','五','六','日']}}" class="top-text" wx:key="key">周{{item}}</view>
    </view>
    <view class="top" style="border-radius:0;">
      <view wx:for="{{selected_week_date}}" class="top-text" wx:key="key">{{item}}</view>
    </view>

    <view style="background-color:#fff;color:#808080;border-radius:0 0 20rpx 20rpx; ">
      <view wx:for="{{schedule_go_class_time}}" class="left" wx:key="key">
        <text>{{item.time}}\n{{item.start}}\n{{item.finish}}</text>
      </view>
    </view>

    <view wx:for="{{[1,2,3,4,5,6,7,8,9]}}" wx:key="key">
      <view
        style="width:720rpx;margin-top:{{(index+1)*120+90}}rpx;position:absolute;top:275rpx;border-bottom:1rpx solid {{index%2!=0?'#C0C0C0':'#DCDCDC'}};z-index:6">
      </view>
    </view>

    <view wx:for="{{selected_week_data}}" wx:key="key">
      <view class="flex-item kcb-item" bindtap="showCardView" data-info="{{item}}"
        style="margin-left:{{(item.week-1)*91}}rpx;margin-top:{{(item.pitch_num-1)*120+120}}rpx;height:2*850-5rpx;background-color:{{item.color}}">
        <view class="smalltext">
          <text class="smalltext-info" style="padding-bottom:5rpx">{{item.course_name}}</text>
          <text class="smalltext-info">{{item.class_location}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 周1-5 -->
  <view style="display:{{hideweekend == true?'block':'none'}}">
    <view class="today"
      style="border-radius:{{point_day == 5?'0 15rpx 15rpx 0':'0'}};margin-left:{{point_day >= 3? point_day*120:point_day*120}}rpx;width:120rpx;display:{{point_day>5?'none':'block'}};">
    </view>
    <view class="top" style="padding-left:120rpx">
      <view wx:for="{{['一','二','三','四','五']}}" class="top-text" wx:key="key" style="width:125rpx;padding-left:10rpx">
        周{{item}}</view>
    </view>
    <view class="top" style="border-radius:0;padding-left:120rpx">
      <view wx:for="{{selected_week_date}}" class="top-text" wx:key="key" style="width:125rpx;padding-left:10rpx">
        {{item}}</view>
    </view>

    <view style="background-color:#fff;color:#808080;border-radius:0 0 20rpx 20rpx">
      <view wx:for="{{schedule_go_class_time}}" class="left" wx:key="key">
        <text style="margin-left:30rpx">{{item.time}}\n{{item.start}}\n{{item.finish}}</text>
      </view>
    </view>

    <view wx:for="{{[1,2,3,4,5,6,7,8,9]}}" wx:key="key">
      <view
        style="width:720rpx;margin-top:{{(index+1)*120+50}}rpx;position:absolute;top:315rpx;border-bottom:1rpx solid {{index%2!=0?'#C0C0C0':'#DCDCDC'}};z-index:6">
      </view>
    </view>


    <view wx:for="{{selected_week_data}}" wx:key="key">
      <view class="flex-item kcb-item" bindtap="showCardView" data-info="{{item}}"
        style="margin-left:{{(item.week-1)*120}}rpx;margin-top:{{(item.pitch_num-1)*120+120}}rpx;height:2*850-5rpx;background-color:{{item.color}};width:115rpx;left:140rpx"
        wx:if="{{item.week<6}}">
        <view class="smalltext">
          <text class="smalltext-info" style="padding-bottom:5rpx;margin-right:2rpx">{{item.course_name}}</text>
          <text class="smalltext-info" style="margin-right:2rpx">{{item.class_location}}</text>
        </view>
      </view>
    </view>
  </view>
</view>

<!-- 本周无课提示 -->
<view class="noclass">
  <view class="noclass-info" wx:if="{{selected_week_data.length == 0}}">这周没有课程</view>
  <view class="noclass-info" wx:if="{{selected_week_data.length == 0}}">如课表有变动请清除课表缓存再试</view>
</view>

<!-- 课程详细信息 -->
<in-course_details show_class_message="{{show_class_message}}" course_info_target="{{course_info_target}}" />